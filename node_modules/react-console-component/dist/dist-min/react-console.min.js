var Console=function(t){function e(r){if(o[r])return o[r].exports;var s=o[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";var r=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},s=o(2);o(1);var n=function(t){function e(){t.apply(this,arguments),this.child={},this.updateSemaphore=0}return r(e,t),e.prototype.componentDidMount=function(){this.idle()},e.prototype.componentDidUpdate=function(){this.idle()},e.prototype.idle=function(){var t=this;this.child.cursor&&(0==this.updateSemaphore&&(this.child.cursor.className="react-console-cursor"),this.updateSemaphore++,window.setTimeout(function(){t.updateSemaphore--,0==t.updateSemaphore&&t.child.cursor&&(t.child.cursor.className="react-console-cursor react-console-cursor-idle")},1e3))},e.prototype.renderValue=function(){var t=this;return this.props.point<0?[this.props.value]:this.props.point==this.props.value.length?[this.props.value,s.createElement("span",{ref:function(e){return t.child.cursor=e},key:"cursor",className:"react-console-cursor"}," ")]:[this.props.value.substring(0,this.props.point),s.createElement("span",{ref:function(e){return t.child.cursor=e},key:"cursor",className:"react-console-cursor"},this.props.value.substring(this.props.point,this.props.point+1)),this.props.value.substring(this.props.point+1)]},e.prototype.render=function(){var t=this.props.label;if(this.props.argument){var e=t.lastIndexOf("\n");t=e>=0?t.substring(0,e+1):""}return s.createElement("div",{className:"react-console-prompt-box"},s.createElement("span",{className:"react-console-prompt-label"},t),s.createElement("span",{className:"react-console-prompt-argument"},this.props.argument),s.createElement("span",{className:"react-console-prompt"},this.renderValue()))},e.defaultProps={point:-1,value:"",label:"> ",argument:null},e}(s.Component),a=function(t){return s.createElement("div",{className:"react-console-message"+(t.type?" react-console-message-"+t.type:"")},t.value.map(function(t){return"string"==typeof t?t:JSON.stringify(t)}).join("\n"))};a.defaultProps={type:null,value:[]};var i=function(t){function e(e){var o=this;t.call(this,e),this.child={},this.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=o.state.log;r[o.state.log.length-1].message.push({value:t}),o.setState({log:r},o.scrollIfBottom())},this.logX=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var s=o.state.log;s[o.state.log.length-1].message.push({type:t,value:e}),o.setState({log:s},o.scrollIfBottom())},this["return"]=function(){o.setState({acceptInput:!0,currLabel:o.nextLabel()},o.scrollIfBottom())},this.focus=function(){window.getSelection().toString()||(o.child.typer.focus(),o.setState({focus:!0},o.scrollToBottom))},this.blur=function(){o.setState({focus:!1})},this.keyDown=function(t){var e={13:o.acceptLine,37:o.backwardChar,39:o.forwardChar,38:o.previousHistory,40:o.nextHistory,8:o.backwardDeleteChar,46:o.deleteChar,35:o.endOfLine,36:o.beginningOfLine,9:o.complete,27:o.prefixMeta},r={65:o.beginningOfLine,69:o.endOfLine,70:o.forwardChar,66:o.backwardChar,80:o.previousHistory,78:o.nextHistory,82:o.reverseSearchHistory,83:o.forwardSearchHistory,68:o.deleteChar,75:o.killLine,85:o.backwardKillLine,89:o.yank,67:o.cancelCommand},s=({8:o.backwardKillLine},{70:o.forwardWord,66:o.backwardWord,80:o.nonIncrementalReverseSearchHistory,78:o.nonIncrementalForwardSearchHistory,190:o.yankLastArg,68:o.killWord,8:o.backwardKillWord,89:o.yankPop}),n={188:o.beginningOfHistory,190:o.endOfHistory,189:o.yankLastArg},a={89:o.yankNthArg};o.state.acceptInput&&(t.altKey?(t.ctrlKey?t.keyCode in a&&(a[t.keyCode](),t.preventDefault()):t.shiftKey?t.keyCode in n&&(n[t.keyCode](),t.preventDefault()):t.keyCode in s&&(s[t.keyCode](),t.preventDefault()),t.preventDefault()):t.ctrlKey?(t.keyCode in r&&(r[t.keyCode](),t.preventDefault()),t.preventDefault()):t.keyCode in e&&(e[t.keyCode](),t.preventDefault()))},this.change=function(){for(var t=0;t<o.state.typer.length&&t<o.child.typer.value.length&&o.state.typer[t]==o.child.typer.value[t];t++);var e=o.child.typer.value.substring(t),r=o.state.typer.length-t;1==o.state.lastCommand?o.setState({searchText:o.state.searchInit?e:o.textInsert(e,o.state.searchText,r),typer:o.child.typer.value},o.triggerSearch):o.setState(Object.assign(o.consoleInsert(e,r),{typer:o.child.typer.value,lastCommand:0}),o.scrollToBottom)},this.paste=function(t){var e=t.clipboardData.getData("text");1==o.state.lastCommand?o.setState({searchText:o.state.searchInit?e:o.textInsert(e,o.state.searchText),typer:o.child.typer.value},o.triggerSearch):o.setState(Object.assign(o.consoleInsert(e),{lastCommand:0}),o.scrollToBottom),t.preventDefault()},this.beginningOfLine=function(){o.setState({point:0,argument:null,lastCommand:0},o.scrollToBottom)},this.endOfLine=function(){o.setState({point:o.state.promptText.length,argument:null,lastCommand:0},o.scrollToBottom)},this.forwardChar=function(){o.setState({point:o.movePoint(1),argument:null,lastCommand:0},o.scrollToBottom)},this.backwardChar=function(){o.setState({point:o.movePoint(-1),argument:null,lastCommand:0},o.scrollToBottom)},this.forwardWord=function(){o.setState({point:o.nextWord(),argument:null,lastCommand:0},o.scrollToBottom)},this.backwardWord=function(){o.setState({point:o.previousWord(),argument:null,lastCommand:0},o.scrollToBottom)},this.acceptLine=function(){if(o.child.typer.value="",o.props["continue"](o.state.promptText))o.setState(Object.assign(o.consoleInsert("\n"),{typer:"",lastCommand:0}),o.scrollToBottom);else{var t=o.state.promptText,e=o.state.history,r=o.state.log;e&&e[e.length-1]==t||e.push(t),r.push({label:o.state.currLabel,command:t,message:[]}),o.setState({acceptInput:!1,typer:"",point:0,promptText:"",restoreText:"",log:r,history:e,historyn:0,argument:null,lastCommand:0},function(){o.scrollToBottom(),o.props.handler(t)})}},this.previousHistory=function(){o.rotateHistory(-1)},this.nextHistory=function(){o.rotateHistory(1)},this.beginningOfHistory=function(){o.rotateHistory(-o.state.history.length)},this.endOfHistory=function(){o.rotateHistory(o.state.history.length)},this.triggerSearch=function(){0==o.state.searchDirection?o.reverseSearchHistory():o.forwardSearchHistory()},this.reverseSearchHistory=function(){1==o.state.lastCommand?o.setState(Object.assign(o.searchHistory(0,!0),{argument:"(reverse-i-search)`"+o.state.searchText+"': ",lastCommand:1}),o.scrollToBottom):o.setState({searchDirection:0,searchInit:!0,argument:"(reverse-i-search)`': ",lastCommand:1},o.scrollToBottom)},this.forwardSearchHistory=function(){1==o.state.lastCommand?o.setState(Object.assign(o.searchHistory(1,!0),{argument:"(forward-i-search)`"+o.state.searchText+"': ",lastCommand:1}),o.scrollToBottom):o.setState({searchDirection:1,searchInit:!0,argument:"(forward-i-search)`': ",lastCommand:1},o.scrollToBottom)},this.nonIncrementalReverseSearchHistory=function(){},this.nonIncrementalForwardSearchHistory=function(){},this.historySearchBackward=function(){},this.historySearchForward=function(){},this.historySubstringSearchBackward=function(){},this.historySubstringSearchForward=function(){},this.yankNthArg=function(){},this.yankLastArg=function(){},this.deleteChar=function(){o.state.point<o.state.promptText.length&&o.setState({promptText:o.state.promptText.substring(0,o.state.point)+o.state.promptText.substring(o.state.point+1),argument:null,lastCommand:0},o.scrollToBottom)},this.backwardDeleteChar=function(){1==o.state.lastCommand?o.setState({searchText:o.state.searchText.substring(0,o.state.searchText.length-1),typer:o.child.typer.value},o.triggerSearch):o.state.point>0&&o.setState({point:o.movePoint(-1),promptText:o.state.promptText.substring(0,o.state.point-1)+o.state.promptText.substring(o.state.point),argument:null,lastCommand:0},o.scrollToBottom)},this.killLine=function(){var t=o.state.kill;2==o.state.lastCommand?t[0]=t[0]+o.state.promptText.substring(o.state.point):t.unshift(o.state.promptText.substring(o.state.point)),o.setState({promptText:o.state.promptText.substring(0,o.state.point),kill:t,killn:0,argument:null,lastCommand:2},o.scrollToBottom)},this.backwardKillLine=function(){var t=o.state.kill;2==o.state.lastCommand?t[0]=o.state.promptText.substring(0,o.state.point)+t[0]:t.unshift(o.state.promptText.substring(0,o.state.point)),o.setState({point:0,promptText:o.state.promptText.substring(o.state.point),kill:t,killn:0,argument:null,lastCommand:2},o.scrollToBottom)},this.killWholeLine=function(){var t=o.state.kill;2==o.state.lastCommand?t[0]=o.state.promptText.substring(0,o.state.point)+t[0]+o.state.promptText.substring(o.state.point):t.unshift(o.state.promptText),o.setState({point:0,promptText:"",kill:t,killn:0,argument:null,lastCommand:2},o.scrollToBottom)},this.killWord=function(){var t=o.state.kill;2==o.state.lastCommand?t[0]=t[0]+o.state.promptText.substring(o.state.point,o.nextWord()):t.unshift(o.state.promptText.substring(o.state.point,o.nextWord())),o.setState({promptText:o.state.promptText.substring(0,o.state.point)+o.state.promptText.substring(o.nextWord()),kill:t,killn:0,argument:null,lastCommand:2},o.scrollToBottom)},this.backwardKillWord=function(){var t=o.state.kill;2==o.state.lastCommand?t[0]=o.state.promptText.substring(o.previousWord(),o.state.point)+t[0]:t.unshift(o.state.promptText.substring(o.previousWord(),o.state.point)),o.setState({point:o.previousWord(),promptText:o.state.promptText.substring(0,o.previousWord())+o.state.promptText.substring(o.state.point),kill:t,killn:0,argument:null,lastCommand:2},o.scrollToBottom)},this.yank=function(){o.setState(Object.assign(o.consoleInsert(o.state.kill[o.state.killn]),{lastCommand:3}),o.scrollToBottom)},this.yankPop=function(){if(3==o.state.lastCommand){var t=o.rotateRing(1,o.state.killn,o.state.kill.length);o.setState(Object.assign(o.consoleInsert(o.state.kill[t],o.state.kill[o.state.killn].length),{killn:t,lastCommand:3}),o.scrollToBottom)}},this.complete=function(){if(o.props.complete){for(var t=o.state.promptText.split(" "),e=0,r=t[0].length;r<o.state.point&&e+1<t.length;)r+=t[++e].length+1;var s=o.props.complete(t,e,o.state.promptText);if(1==s.length){t[e]=s[0];for(var n=-1,a=0;a<=e;a++)n+=t[a].length+1;o.setState({point:n,promptText:t.join(" "),argument:null,lastCommand:0},o.scrollToBottom)}else if(s.length>1){var i=o.state.log;i.push({label:o.state.currLabel,command:o.state.promptText,message:[{type:"completion",value:[s.join("\t")]}]}),o.setState({currLabel:o.nextLabel(),log:i,argument:null,lastCommand:0},o.scrollToBottom)}}},this.prefixMeta=function(){1==o.state.lastCommand&&o.setState({argument:null,lastCommand:0})},this.cancelCommand=function(){if(o.state.acceptInput){o.child.typer.value="";var t=o.state.log;t.push({label:o.state.currLabel,command:o.state.promptText,message:[]}),o.setState({typer:"",point:0,promptText:"",restoreText:"",log:t,historyn:0,argument:null,lastCommand:0},o.scrollToBottom)}else o.props.cancel()},this.textInsert=function(t,e,o,r){return void 0===o&&(o=0),void 0===r&&(r=e.length),e.substring(0,r-o)+t+e.substring(r)},this.consoleInsert=function(t,e){void 0===e&&(e=0);var r=o.textInsert(t,o.state.promptText,e,o.state.point);return{point:o.movePoint(t.length-e,t.length-e+o.state.promptText.length),promptText:r,restoreText:r,argument:null,lastCommand:0}},this.movePoint=function(t,e){void 0===e&&(e=o.state.promptText.length);var r=o.state.point+t;return r<0?0:r>e?e:r},this.rotateRing=function(t,e,o,r){return void 0===r&&(r=!0),0==o?0:r?(o+(e+t)%o)%o:(e-=t,e<0?0:e>=o?o:e)},this.rotateHistory=function(t){var e=o.rotateRing(t,o.state.historyn,o.state.history.length,!1);if(0==e)o.setState({point:o.state.restoreText.length,promptText:o.state.restoreText,historyn:e,argument:null,lastCommand:0},o.scrollToBottom);else{var r=o.state.history[o.state.history.length-e];o.setState({point:r.length,promptText:r,historyn:e,argument:null,lastCommand:0},o.scrollToBottom)}},this.searchHistory=function(t,e){void 0===t&&(t=o.state.searchDirection),void 0===e&&(e=!1);var r=o.state.historyn,s=0==t?1:-1;for(e&&(r+=s);r>0&&r<=o.state.history.length;r+=s){var n=o.state.history[o.state.history.length-r],a=n.indexOf(o.state.searchText);if(a>-1)return{point:a,promptText:n,searchDirection:t,searchInit:!1,historyn:r}}return{searchDirection:t,searchInit:!1}},this.scrollSemaphore=0,this.scrollIfBottom=function(){return o.scrollSemaphore>0||o.child.container.scrollTop==o.child.container.scrollHeight-o.child.container.offsetHeight?(o.scrollSemaphore++,o.scrollIfBottomTrue):null},this.scrollIfBottomTrue=function(){o.scrollToBottom(),o.scrollSemaphore--},this.scrollToBottom=function(){o.child.container.scrollTop=o.child.container.scrollHeight;var t=o.child.focus.getBoundingClientRect();(t.top<0||t.left<0||t.bottom>(window.innerHeight||document.documentElement.clientHeight)||t.right>(window.innerWidth||document.documentElement.clientWidth))&&o.child.typer.scrollIntoView(!1)},this.nextLabel=function(){return"string"==typeof o.props.promptLabel?o.props.promptLabel:o.props.promptLabel()},this.state={focus:!1,acceptInput:!0,typer:"",point:0,currLabel:this.nextLabel(),promptText:"",restoreText:"",searchText:"",searchDirection:null,searchInit:!1,log:[],history:[],historyn:0,kill:[],killn:0,argument:null,lastCommand:0}}return r(e,t),e.prototype.componentDidMount=function(){this.props.autofocus&&this.focus()},e.prototype.nextWord=function(){var t=/\W\w/.exec(this.state.promptText.substring(this.state.point));return t?t.index+this.state.point+1:this.state.promptText.length},e.prototype.previousWord=function(){var t=/\W\w(?!.*\W\w)/.exec(this.state.promptText.substring(0,this.state.point-1));return t?t.index+1:0},e.prototype.render=function(){var t=this;return s.createElement("div",{ref:function(e){return t.child.container=e},className:"react-console-container "+(this.state.focus?"react-console-focus":"react-console-nofocus"),onClick:this.focus},this.props.welcomeMessage?s.createElement("div",{className:"react-console-message react-console-welcome"},this.props.welcomeMessage):null,this.state.log.map(function(t){return[s.createElement(n,{label:t.label,value:t.command})].concat(t.message.map(function(t,e){return s.createElement(a,{key:e,type:t.type,value:t.value})}))}),this.state.acceptInput?s.createElement(n,{label:this.state.currLabel,value:this.state.promptText,point:this.state.point,argument:this.state.argument}):null,s.createElement("div",{style:{overflow:"hidden",height:1,width:1}},s.createElement("textarea",{ref:function(e){return t.child.typer=e},className:"react-console-typer",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",style:{outline:"none",color:"transparent",backgroundColor:"transparent",border:"none",resize:"none",overflow:"hidden"},onBlur:this.blur,onKeyDown:this.keyDown,onChange:this.change,onPaste:this.paste})),s.createElement("div",{ref:function(e){return t.child.focus=e}}," "))},e.defaultProps={promptLabel:"> ","continue":function(){return!1},cancel:function(){}},e}(s.Component);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e){},function(t,e){t.exports=React}]);
//# sourceMappingURL=react-console.min.js.map